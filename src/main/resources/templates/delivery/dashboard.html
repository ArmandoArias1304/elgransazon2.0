<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>El Gran Sazón - Dashboard Delivery</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Work+Sans:wght@400;500;600;700;800&display=swap"
        rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght@300;400;500;600;700"
        rel="stylesheet" />
    <!-- Sistema de Temas (Modo Claro/Oscuro) -->
    <div th:replace="~{fragments/theme :: themeResources}"></div>
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <script>
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        primary: "#38e07b",
                        "primary-dark": "#2bc866",
                        "background-light": "#f8faf9",
                        "background-dark": "#0f1713",
                    },
                    fontFamily: {
                        display: ["Work Sans"],
                    },
                    borderRadius: {
                        DEFAULT: "0.5rem",
                        lg: "0.75rem",
                        xl: "1rem",
                        "2xl": "1.5rem",
                        "3xl": "2rem",
                        full: "9999px",
                    },
                },
            },
        };
    </script>

    <style>
        /* Animaciones suaves */
        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes scaleIn {
            from {
                opacity: 0;
                transform: scale(0.9);
            }

            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .animate-fadeInDown {
            animation: fadeInDown 0.6s ease-out;
        }

        .animate-fadeInUp {
            animation: fadeInUp 0.6s ease-out;
        }

        .animate-scaleIn {
            animation: scaleIn 0.5s ease-out;
        }

        /* Efectos de hover mejorados */
        .dashboard-card {
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .dashboard-card:hover {
            transform: translateY(-8px) scale(1.02);
        }

        .dashboard-card:active {
            transform: translateY(-4px) scale(1.01);
        }

        /* Reloj digital */
        .clock-time {
            font-family: "Courier New", monospace;
            font-weight: 700;
            letter-spacing: 0.05em;
        }

        .clock-date {
            font-family: "Work Sans", sans-serif;
            font-weight: 600;
        }
    </style>
</head>

<body
    class="bg-gradient-to-br from-background-light to-gray-50 dark:from-background-dark dark:to-gray-900 font-display min-h-screen">
    <!-- NAVIGATION BAR -->
    <nav class="bg-gradient-to-r from-primary to-primary-dark shadow-lg animate-fadeInDown">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16 sm:h-20">
                <!-- Logo/Brand -->
                <div class="flex items-center gap-3">
                    <!-- Restaurant Logo -->
                    <div class="w-10 h-10 sm:w-12 sm:h-12 shrink-0 bg-white rounded-xl flex items-center justify-center shadow-lg overflow-hidden">
                        <img src="/images/LogoVariante.png" th:alt="${config.restaurantName}"
                            class="w-full h-full object-contain p-1" />
                    </div>

                    <span class="text-white text-xl sm:text-2xl font-bold tracking-tight"
                        th:text="${config.restaurantName != null && !config.restaurantName.isEmpty()} ? ${config.restaurantName} : 'El Gran Sazón'">
                        El Gran Sazón
                    </span>
                </div>

                <!-- User Info & Logout -->
                <div class="flex items-center gap-3 sm:gap-6">
                    <div class="hidden sm:flex items-center gap-2 text-white">
                        <span class="material-symbols-outlined">account_circle</span>
                        <span class="text-sm font-medium">
                            Bienvenido,
                            <strong th:text="${username}">Repartidor</strong>
                        </span>
                    </div>

                    <form th:action="@{/logout}" method="post" class="inline">
                        <button type="submit"
                            class="flex items-center gap-2 px-4 py-2 rounded-xl bg-white/20 hover:bg-white/30 text-white font-semibold transition-all border border-white/30 text-sm sm:text-base">
                            <span class="material-symbols-outlined text-lg">logout</span>
                            <span class="hidden sm:inline">Cerrar Sesión</span>
                            <span class="sm:hidden">Salir</span>
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </nav>

    <!-- MAIN CONTENT -->
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 sm:py-12">
        <!-- WELCOME CARD -->
        <div
            class="rounded-3xl bg-white dark:bg-gray-900 shadow-xl p-8 sm:p-12 text-center mb-8 sm:mb-12 border border-gray-200 dark:border-gray-800 animate-scaleIn">
            <div class="mb-4">
                <span class="inline-block p-4 rounded-full bg-primary/10 dark:bg-primary/20">
                    <span class="material-symbols-outlined text-primary text-5xl sm:text-6xl">delivery_dining</span>
                </span>
            </div>
            <h1 class="text-3xl sm:text-4xl lg:text-5xl font-bold text-gray-900 dark:text-white mb-3">
                Panel de Control - Delivery
            </h1>
            <p class="text-base sm:text-lg text-gray-600 dark:text-gray-400 max-w-2xl mx-auto">
                Gestiona tus entregas de manera eficiente y segura
            </p>
        </div>

        <!-- DASHBOARD GRID -->
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6 max-w-5xl mx-auto">
            <!-- CARD 1: Pedidos a Repartir -->
            <a href="/delivery/orders/pending"
                class="dashboard-card block rounded-3xl bg-white dark:bg-gray-900 shadow-lg hover:shadow-2xl border border-gray-200 dark:border-gray-800 p-6 sm:p-8 text-center animate-fadeInUp"
                style="animation-delay: 0.1s">
                <div class="flex flex-col items-center">
                    <div class="mb-4">
                        <span
                            class="material-symbols-outlined text-7xl sm:text-8xl text-orange-500">two_wheeler</span>
                    </div>
                    <h3 class="text-xl sm:text-2xl font-bold text-gray-900 dark:text-white mb-2">
                        Pedidos a Repartir
                    </h3>
                    <p class="text-sm sm:text-base text-gray-500 dark:text-gray-400">
                        Ver pedidos pendientes de entrega
                    </p>
                </div>
            </a>

            <!-- CARD 2: Pedidos Repartidos -->
            <a href="/delivery/orders/completed"
                class="dashboard-card block rounded-3xl bg-white dark:bg-gray-900 shadow-lg hover:shadow-2xl border border-gray-200 dark:border-gray-800 p-6 sm:p-8 text-center animate-fadeInUp"
                style="animation-delay: 0.15s">
                <div class="flex flex-col items-center">
                    <div class="mb-4">
                        <span class="material-symbols-outlined text-7xl sm:text-8xl text-primary">task_alt</span>
                    </div>
                    <h3 class="text-xl sm:text-2xl font-bold text-gray-900 dark:text-white mb-2">
                        Pedidos Repartidos
                    </h3>
                    <p class="text-sm sm:text-base text-gray-500 dark:text-gray-400">
                        Historial de entregas completadas
                    </p>
                </div>
            </a>

            <!-- CARD 3: Reportes -->
            <a href="/delivery/reports/view"
                class="dashboard-card block rounded-3xl bg-white dark:bg-gray-900 shadow-lg hover:shadow-2xl border border-gray-200 dark:border-gray-800 p-6 sm:p-8 text-center animate-fadeInUp"
                style="animation-delay: 0.2s">
                <div class="flex flex-col items-center">
                    <div class="mb-4">
                        <span class="material-symbols-outlined text-7xl sm:text-8xl text-blue-500">bar_chart</span>
                    </div>
                    <h3 class="text-xl sm:text-2xl font-bold text-gray-900 dark:text-white mb-2">
                        Reportes
                    </h3>
                    <p class="text-sm sm:text-base text-gray-500 dark:text-gray-400">
                        Análisis y estadísticas
                    </p>
                </div>
            </a>

            <!-- CARD 4: Perfil -->
            <a href="/delivery/profile"
                class="dashboard-card block rounded-3xl bg-white dark:bg-gray-900 shadow-lg hover:shadow-2xl border border-gray-200 dark:border-gray-800 p-6 sm:p-8 text-center animate-fadeInUp"
                style="animation-delay: 0.25s">
                <div class="flex flex-col items-center">
                    <div class="mb-4">
                        <span
                            class="material-symbols-outlined text-7xl sm:text-8xl text-indigo-500">account_circle</span>
                    </div>
                    <h3 class="text-xl sm:text-2xl font-bold text-gray-900 dark:text-white mb-2">
                        Perfil
                    </h3>
                    <p class="text-sm sm:text-base text-gray-500 dark:text-gray-400">
                        Mi cuenta y configuración
                    </p>
                </div>
            </a>

             <!-- CARD 6: Propinas -->
        <a
          href="/delivery/tip/view"
          class="dashboard-card block rounded-3xl bg-white dark:bg-gray-900 shadow-lg hover:shadow-2xl border border-gray-200 dark:border-gray-800 p-6 sm:p-8 text-center animate-fadeInUp"
          style="animation-delay: 0.35s"
        >
          <div class="flex flex-col items-center">
            <div class="mb-4">
              <span
                class="material-symbols-outlined text-6xl sm:text-7xl text-amber-500"
              >
                payments
              </span>
            </div>
            <h3
              class="text-lg sm:text-xl font-bold text-gray-900 dark:text-white mb-2"
            >
              Propinas
            </h3>
            <p class="text-xs sm:text-sm text-gray-500 dark:text-gray-400">
              Gestión de propinas
            </p>
          </div>
        </a>

            <!-- CARD 5: Reloj en Tiempo Real (NO ES BOTÓN) -->
            <div class="rounded-3xl bg-gradient-to-br from-primary to-primary-dark shadow-lg border-2 border-primary-dark p-6 sm:p-8 text-center animate-fadeInUp sm:col-span-2 lg:col-span-1"
                style="animation-delay: 0.3s">
                <div class="flex flex-col items-center justify-center h-full">
                    <div class="mb-2">
                        <span class="material-symbols-outlined text-white text-5xl sm:text-6xl">schedule</span>
                    </div>
                    <!-- Fecha -->
                    <div id="currentDate" class="clock-date text-white text-base sm:text-lg mb-3">
                        01.01.2024
                    </div>
                    <!-- Hora -->
                    <div id="currentTime" class="clock-time text-white text-3xl sm:text-4xl font-bold">
                        00:00:00
                    </div>
                </div>
            </div>
        </div>

        <!-- FOOTER INFO -->
        <div class="mt-12 text-center text-sm text-gray-500 dark:text-gray-400 animate-fadeInUp"
            style="animation-delay: 0.35s">
            <p>
                Sistema de Gestión de Delivery &copy; 2024 El Gran Sazón. Todos los
                derechos reservados.
            </p>
        </div>
    </div>

    <!-- SCRIPT PARA RELOJ EN TIEMPO REAL -->
    <script>
        function updateClock() {
            const now = new Date();

            // Formato de fecha: D.M.AÑO (ejemplo: 24.10.2024)
            const day = String(now.getDate()).padStart(2, "0");
            const month = String(now.getMonth() + 1).padStart(2, "0"); // Los meses van de 0-11
            const year = now.getFullYear();
            const dateString = `${day}.${month}.${year}`;

            // Formato de hora: HH:MM:SS (ejemplo: 14:35:42)
            const hours = String(now.getHours()).padStart(2, "0");
            const minutes = String(now.getMinutes()).padStart(2, "0");
            const secs = String(now.getSeconds()).padStart(2, "0");
            const timeString = `${hours}:${minutes}:${secs}`;

            // Actualizar el DOM
            const dateEl = document.getElementById("currentDate");
            const timeEl = document.getElementById("currentTime");
            if (dateEl) dateEl.textContent = dateString;
            if (timeEl) timeEl.textContent = timeString;
        }

        // Actualizar el reloj cada segundo
        setInterval(updateClock, 1000);

        // Inicializar el reloj inmediatamente
        updateClock();
    </script>
    
    <!-- Script del Sistema de Temas -->
    <div th:replace="~{fragments/theme :: themeScript}"></div>
</body>
</htmtl>